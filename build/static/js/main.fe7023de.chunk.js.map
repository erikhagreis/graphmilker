{"version":3,"sources":["reducers/userAuth.js","reducers/posts.js","reducers/view.js","reducers/index.js","reducers/config.js","reducers/formData.js","reducers/pageAuth.js","reducers/permissions.js","components/Overlay.jsx","components/Error.jsx","components/Loading.jsx","actions/fbPageApi.js","actions/fbUserApi.js","actions/fbInitApp.js","actions/switchView.js","actions/boot.js","actions/closeGraphmilker.js","actions/ensureDetails.js","actions/formUpdateValue.js","actions/index.js","actions/selectPost.js","actions/showDetails.js","actions/urlFormSubmit.js","components/Button.jsx","containers/Login.jsx","components/PostSummary.jsx","containers/PostList.jsx","containers/PostUrlForm.jsx","components/Overview.jsx","components/PostImage.jsx","components/PostLinkBlock.jsx","components/PostVideo.jsx","containers/PostDetails.jsx","containers/GraphMilker.jsx","app.js","index.js"],"names":["DEFAULT_STATE","loggedIn","permissions","immutableSplice","arr","start","deleteCount","_len","arguments","length","items","Array","_key","concat","Object","toConsumableArray","slice","graphmilkerState","combineReducers","config","state","undefined","action","type","objectSpread","pending","data","pageId","id","formData","_action$data","formName","fieldName","fieldValue","fieldValidation","update","defineProperty","name","value","validation","pageAuth","posts","stubs","details","fetching","error","cursors","paging","postIndex","findIndex","detailsLoaded","userAuth","get","view","Overlay","_ref","children","_ref$onClose","onClose","noop","react_default","a","createElement","className","onClick","Error","_ref$type","Loading","getPageName","getPageAccessToken","getUserAccessToken","getPostType","post","getLinkUrl","shimmedUrl","query","parseUrl","u","decodeURIComponent","scrapeUrl","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","abrupt","Facebook","scrape","stop","_x","apply","this","getPageId","dispatch","getState","access_token","fields","then","response","getPosts","_ref2","_callee2","cursor","_context2","limit","sent","map","_x2","_x3","getPostDetails","postId","_ref3","_callee3","postType","linkUrl","graphMeta","fullGraphMeta","_context3","reduce","pick","obj","key","set","link","_x4","_x5","getLoginStatus","noCache","status","authResponse","login","scope","getPermissions","keys","values","permisions","zipObject","getAccounts","accounts","fbInitApp","appId","version","switchView","detailId","trySessionContinue","userApi","doPostLoginChecks","_ref4","_callee4","pageName","_context4","_x6","_x7","closeGraphmilker","window","graphmilker","hide","ensureDetails","find","Promise","resolve","pageApi","formUpdateValue","actions","boot","initApp","selectPost","onPostSelectedCallback","showDetails","urlFormSubmit","postUrlField","postUrl","match","slicedToArray","photoPart1","photoPart2","theaterPart1","theaterPart2","theaterPart3","_ref5","_ref6","postPart1","postPart2","queryParams","story_fbid","getPostIdByPostUrl","Button","connect","ownProps","happy","loginFailed","accessTokenMissing","permissionsMissing","onLogin","e","preventDefault","PostSummary","postData","message","PostList","props","_this$props","_this$props$posts","_this$props$posts$stu","_this$props$posts$cur","after","Component","mapDispatchToProps","PostUrlForm","formSubmit","formUpdateValues","onSubmit","ref","placeholder","onChange","getValidationMessage","validationMessage","event","target","Overview","containers_PostUrlForm","containers_PostList","PostImage","imageUrl","src","alt","PostLinkBlock","title","description","href","rel","exec","_ref3$","toDomain","PostVideo","_ref$iframeUrl","iframeUrl","parseYoutubeLinks","scrolling","frameBorder","allowFullScreen","youtubeId","getYoutubeEmbedUrl","uParam","_ref8","encodeURIComponent","PostDetails","full_picture","og_title","og_description","og_url","goBack","createdTime","now","moment","diff","fromNow","format","readableCreatedTime","created_time","dangerouslySetInnerHTML","__html","text2html","message_tags","getVisual","GraphMilker","viewName","containers_PostDetails","containers_Login","getView","mapActions","store","createStore","reducer","applyMiddleware","thunkMiddleware","createLogger","src_app","element","ReactDOM","render","es","containers_GraphMilker","getRootElement","document","getElementById","style","display","setConfig","configObj","show","body","appendChild","bootApp","createApp"],"mappings":"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","file":"static/js/main.fe7023de.chunk.js","sourcesContent":["import { get } from \"lodash\";\n\nconst DEFAULT_STATE = {\n  loggedIn: false,\n  permissions: null,\n};\n\nexport default (state = DEFAULT_STATE, action) => {\n  const { type, data } = action;\n\n  switch (type) {\n    case 'USER_LOGIN_RESPONSE':\n    case 'USER_GET_LOGIN_STATUS_RESPONSE':\n      return {\n        ...state,\n        ...data,\n        loggedIn: get(data, 'status') === 'connected',\n      };\n\n    case 'USER_GET_PERMISSIONS_RESPONSE':\n      return {\n        ...state,\n        permissions: data,\n      }\n\n    default:\n      return state;\n  }\n};\n","import { findIndex } from 'lodash';\n\nexport default (state = { stubs: [], details: [] }, action) => {\n  switch (action.type) {\n    case 'GET_POSTS_REQUEST':\n    case 'GET_POST_DETAILS_REQUEST':\n      return {\n        ...state,\n        fetching: true,\n        error: false\n      };\n\n    case 'GET_POSTS_ERROR':\n    case 'GET_POST_DETAILS_ERROR':\n      return {\n        ...state,\n        fetching: false,\n        error: true\n      };\n\n    case 'GET_POSTS_RESPONSE':\n      return {\n        ...state,\n        fetching: false,\n        error: false,\n        stubs: [ ...state.stubs, ...action.data.posts ],\n        cursors: action.data.paging.cursors\n      };\n\n    case 'GET_POST_DETAILS_RESPONSE':\n      const postIndex = findIndex(state.details, { id: action.data.id });\n      return {\n        ...state,\n        fetching: false,\n        error: false,\n        details:\n          postIndex > -1\n            ? // if a stub exists, replace it (should not happen)\n              immutableSplice(state.details, postIndex, 1, { detailsLoaded: true, ...action.data })\n            : // else add it\n              [...state.details, action.data ]\n      };\n\n    default:\n      return state;\n  }\n};\n\n// https://vincent.billey.me/pure-javascript-immutable-array/\nfunction immutableSplice(arr, start, deleteCount, ...items) {\n  return [...arr.slice(0, start), ...items, ...arr.slice(start + deleteCount)];\n}\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case 'SWITCH_VIEW':\n      return {\n        ...action.data\n      };\n\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\n\nimport userAuth from './userAuth';\nimport config from './config';\nimport formData from './formData';\nimport pageAuth from './pageAuth';\nimport permissions from './permissions';\nimport posts from './posts';\nimport view from './view';\n\nconst graphmilkerState = combineReducers({\n  config,\n  formData,\n  pageAuth,\n  permissions,\n  posts,\n  userAuth,\n  view,\n});\n\nexport default graphmilkerState;\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case 'INIT_APP_START':\n      return {\n        ...state,\n        pending: true\n      };\n\n    case 'INIT_APP_COMPLETE':\n      return {\n        ...state,\n        pending: false,\n        ...action.data\n      };\n\n    case 'GET_PAGE_ID_RESPONSE':\n      return {\n        ...state,\n        pageId: action.data.id\n      }\n\n    default:\n      return state;\n  }\n};\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case 'FORM_UPDATE_VALUE':\n      const { formName, fieldName, fieldValue, fieldValidation } = action.data;\n      const update = {\n        ...state[ formName ],\n        [ fieldName ]: {\n          name: fieldName,\n          value: fieldValue,\n          validation: fieldValidation\n        }\n      };\n      return {\n        ...state,\n        [ formName ]: update\n      };\n\n    default:\n      return state;\n  }\n};\n","export default (state = {}, action) => {\n  switch (action.type) {\n    case 'USER_GET_ACCOUNTS_RESPONSE':\n      return action.data || {};\n\n    default:\n      return state;\n  }\n};\n","export default (state = [], action) => {\n  switch (action.type) {\n    case 'USER_GET_PERMISSIONS_RESPONSE':\n      return action.data;\n\n    default:\n      return state;\n  }\n};\n","import './overlay.scss';\nimport React from 'react';\nimport { noop } from 'lodash';\n\nexport default ({ children, onClose = noop }) => (\n  <div className=\"gm-overlay\">\n    <div className=\"gm-overlay__inner\">\n      <div className=\"gm-overlay__content\">\n        <button className=\"gm-overlay__closeButton\" onClick={onClose}>✕<span> close</span></button>\n        {children}\n      </div>\n    </div>\n  </div>\n);\n","import './error.scss';\nimport React from 'react';\n\nexport default ({type = 'unknown'}) => (\n  <div className=\"gm-error\">\n    <h2 className=\"gm-error__title gm-sectionTitle\">\n      Whoops. A {type} error occurred.\n    </h2>\n  </div>\n);\n","import './loading.scss';\nimport React from 'react';\n\nexport default () => (\n  <div className=\"gm-loading\">\n    <h2 className=\"gm-loading__title gm-sectionTitle\">\n      Hold on...\n    </h2>\n  </div>\n);\n","import { get, map, pick, reduce, set } from 'lodash';\nimport parseUrl from 'parse-url';\nimport * as Facebook from 'fb-sdk-wrapper';\n\nconst getPageName = (state) =>  get(state, 'config.pageName');\n\nconst getUserAccessToken = (state) => get(state, `userAuth.access_token`);\n\nconst getPageAccessToken = (state) => get(\n  state,\n  `pageAuth.${getPageName(state)}.access_token`,\n  getUserAccessToken(state)\n);\n\nconst getPostType = (post) => get(post, 'attachments.data.0.media_type', 'status');\n\nconst getLinkUrl = (post) => {\n  const shimmedUrl = get(post, 'attachments.data.0.url', 'status');\n  const { query } = parseUrl(shimmedUrl);\n\n  return query.u ? decodeURIComponent(query.u) : shimmedUrl;\n}\n\nconst scrapeUrl = async (url) => Facebook.api('/', 'post', {\n  'scrape': true,\n  'id': url\n});\n\nexport const getPageId = () => {\n  return (dispatch, getState) => {\n      dispatch({type: 'GET_PAGE_ID_REQUEST' });\n\n      return Facebook.api(`/${getPageName(getState())}`, 'get', {\n          access_token: getPageAccessToken(getState()),\n          fields: 'id'\n        })\n        .then((response) => {\n          if (!response || response.error) {\n            const error = response.error || 'Error occured in getPageId';\n            dispatch({ type: 'GET_PAGE_ID_ERROR', error });\n            throw error;\n          } else {\n            dispatch({ type: 'GET_PAGE_ID_RESPONSE', data: response });\n            return response;\n          }\n        });\n  };\n};\n\nexport const getPosts = () => {\n  return async (dispatch, getState) => {\n    dispatch({ type: 'GET_POSTS_REQUEST' });\n\n    const cursor = get(getState(), 'posts.cursors.after');\n    const query = cursor ? `?after=${cursor}` : '';\n\n    const response = await Facebook.api(`/${getPageName(getState())}/posts${query}`, 'get', {\n      access_token: getPageAccessToken(getState()),\n      fields: 'id,message,attachments{media_type}',\n      limit: 10\n    });\n\n    if (!response || response.error) {\n      const error = response.error || 'Error occured in getPosts';\n      dispatch({ type: 'GET_POSTS_ERROR', error });\n      throw error;\n    }\n\n    const posts = map(response.data, (post) => ({\n      ...post,\n      type: getPostType(post),\n    }));\n\n    const data = {\n      posts,\n      paging: response.paging,\n    };\n\n    dispatch({ type: 'GET_POSTS_RESPONSE', data });\n\n    return data;\n  };\n};\n\nexport const getPostDetails = postId => {\n  return async (dispatch, getState) => {\n    dispatch({ type: 'GET_POST_DETAILS_REQUEST' });\n\n    const response = await Facebook.api(`/${postId}`, 'get', {\n      access_token: getPageAccessToken(getState()),\n      fields: 'id,attachments{media_type,url,url_unshimmed},created_time,message,message_tags,full_picture'\n    });\n\n    if (!response || response.error) {\n      const error = response.error || 'Error occured in getPostDetails';\n      dispatch({ type: 'GET_POST_DETAILS_ERROR', error });\n      throw error;\n    }\n\n    const postType = getPostType(response);\n    const linkUrl = getLinkUrl(response);\n\n    let graphMeta;\n    if (postType === 'link') {\n      if (linkUrl) {\n        const fullGraphMeta = await scrapeUrl(linkUrl);\n        graphMeta = reduce(\n          pick(fullGraphMeta, [ 'title', 'description', 'url' ] ),\n          (obj, value, key) => {\n            set(obj, `og_${key}`, value);\n            return obj;\n          },\n          {}\n        );\n      }\n    }\n\n    const post = {\n      ...response,\n      ...graphMeta,\n      type: postType,\n      link: linkUrl,\n    };\n\n    dispatch({ type: 'GET_POST_DETAILS_RESPONSE', data: post });\n\n    return post;\n  };\n};\n","import { map, zipObject } from 'lodash';\nimport * as Facebook from 'fb-sdk-wrapper';\n\nexport const getLoginStatus = (noCache = false) => {\n  return (dispatch) => {\n    dispatch({ type: 'USER_GET_LOGIN_STATUS_REQUEST' });\n\n    return Facebook.getLoginStatus()\n      .then(response => {\n        dispatch({\n          type: 'USER_GET_LOGIN_STATUS_RESPONSE',\n          data: {\n            status: response.status,\n            ...response.authResponse\n          }\n        });\n        return response;\n      }, noCache);\n  };\n};\n\nexport const login = () => {\n  return (dispatch) => {\n    dispatch({ type: 'USER_LOGIN_REQUEST' });\n\n    return Facebook.login({\n        scope: 'pages_show_list'\n      })\n      .then((response) => {\n        dispatch({\n          type: 'USER_LOGIN_RESPONSE',\n          data: {\n            status: !response.authResponse ? 'rejected' : response.status,\n            ...response.authResponse\n          }\n        });\n        return response;\n      });\n  };\n};\n\nexport const getPermissions = () => {\n  return (dispatch, getState) => {\n    dispatch({type: 'USER_GET_PERMISSIONS_REQUEST' });\n\n    return Facebook.api(`/me/permissions`, 'get', {\n        access_token: getState().userAuth.access_token,\n      })\n      .then((response) => {\n        if (!response || response.error) {\n          const error = response.error || 'Error occured in getPermissions';\n          dispatch({ type: 'USER_GET_PERMISSIONS_ERROR', error });\n          throw error;\n        } else {\n          const keys = map(response.data, 'permission');\n          const values = map(response.data, 'status');\n          const permisions = zipObject(keys, values);\n\n          dispatch({ type: 'USER_GET_PERMISSIONS_RESPONSE', data: permisions });\n          return permisions;\n        }\n      });\n  };\n}\n\nexport const getAccounts = () => {\n  return (dispatch, getState) => {\n    dispatch({type: 'USER_GET_ACCOUNTS_REQUEST' });\n\n    return Facebook.api(`/me/accounts`, 'get', {\n        access_token: getState().userAuth.access_token,\n        fields: 'access_token,name,id,page_token,username',\n      })\n      .then((response) => {\n        if (!response || response.error) {\n          const error = response.error || 'Error occured in getPageId';\n          dispatch({ type: 'USER_GET_ACCOUNTS_ERROR', error });\n          throw error;\n        } else {\n          const keys = map(response.data, 'username');\n          const accounts = zipObject(keys, response.data);\n\n          dispatch({ type: 'USER_GET_ACCOUNTS_RESPONSE', data: accounts });\n          return accounts;\n        }\n      });\n  };\n}","import * as Facebook from 'fb-sdk-wrapper';\n\nexport default (config) => {\n  return dispatch => {\n    dispatch({ type: 'INIT_APP_START' });\n\n    return Facebook.load()\n      .then(() => {\n        Facebook.init({\n          appId: config.appId,\n          version: 'v3.2'\n        });\n        dispatch({ type: 'INIT_APP_COMPLETE', data: config });\n        return config;\n      });\n  };\n};\n","export default (name, detailId) => ({\n  type: 'SWITCH_VIEW',\n  data: { name, detailId }\n});\n","import { get } from 'lodash';\nimport * as userApi from './fbUserApi';\nimport initApp from './fbInitApp';\nimport switchView from './switchView';\n\nexport const boot = (config) => {\n  return async (dispatch) => {\n    dispatch(switchView('loading'));\n    await dispatch(initApp(config));\n    await dispatch(trySessionContinue());\n  };\n}\n\nconst trySessionContinue = () => {\n  return async (dispatch, getState) => {\n    await dispatch(userApi.getLoginStatus());\n\n    dispatch(doPostLoginChecks());\n  };\n};\n\nexport const login = () => {\n  return async (dispatch, getState) => {\n    await dispatch(userApi.login());\n\n    dispatch(doPostLoginChecks());\n  }\n};\n\nconst doPostLoginChecks = () => {\n  return async (dispatch, getState) => {\n    const loggedIn = get(getState(), 'userAuth.loggedIn', false);\n    if (!loggedIn) {\n      dispatch(switchView('login'));\n      return;\n    }\n\n    await dispatch(userApi.getPermissions());\n    const permissionGranted = get(getState(), 'userAuth.permissions.pages_show_list') === 'granted';\n    if (!permissionGranted) {\n     dispatch(switchView('login'));\n     return;\n    }\n\n    await dispatch(userApi.getAccounts());\n    const pageName = get(getState(), 'config.pageName');\n    const pageAccessToken = get(getState(), `pageAuth.${pageName}.access_token`);\n    if (!pageAccessToken) {\n      dispatch(switchView('login'));\n      return;\n    }\n\n    dispatch(switchView('overview'));\n  }\n};\n\n","import switchView from './switchView';\n\nexport default () => \n  (dispatch) => {\n    dispatch({\n      type: 'CLOSE_GRAPHMILKER'\n    });\n\n    window.graphmilker.hide();\n\n    dispatch(switchView('overview'));\n  };\n","import * as pageApi from './fbPageApi';\n\nexport default postId =>\n  (dispatch, getState) => {\n    const post = getState().posts.details.find(post => post.id === postId);\n    if (!post) {\n      return dispatch(pageApi.getPostDetails(postId));\n    }\n    return Promise.resolve();\n  };\n","export default (formName, fieldName, fieldValue, fieldValidation) => {\n  return {\n    type: 'FORM_UPDATE_VALUE',\n    data: { formName, fieldName, fieldValue, fieldValidation }\n  }\n};\n","import * as pageApi from './fbPageApi';\nimport * as userApi from './fbUserApi';\nimport { boot, login } from './boot';\nimport closeGraphmilker from './closeGraphmilker';\nimport ensureDetails from './ensureDetails';\nimport formUpdateValue from './formUpdateValue';\nimport initApp from './fbInitApp';\nimport selectPost from './selectPost';\nimport showDetails from './showDetails';\nimport switchView from './switchView';\nimport urlFormSubmit from './urlFormSubmit';\n\nexport default {\n  userApi,\n  pageApi,\n  boot,\n  closeGraphmilker,\n  ensureDetails,\n  formUpdateValue,\n  initApp,\n  login,\n  selectPost,\n  showDetails,\n  switchView,\n  urlFormSubmit\n};\n","import closeGraphmilker from './closeGraphmilker';\n\nexport default postId =>\n  (dispatch, getState) => {\n    dispatch({\n      type: 'SELECT_POST',\n      data: { postId }\n    });\n\n    const post = getState().posts.details.find(post => post.id === postId);\n    getState().config.onPostSelectedCallback(post);\n\n    dispatch(closeGraphmilker());\n  };\n","import ensureDetails from './ensureDetails';\nimport switchView from './switchView';\n\nexport default postId => \n  (dispatch, getState) => {\n    dispatch(switchView('loading'));\n    dispatch(ensureDetails(postId))\n      .then(() => dispatch(switchView('postDetails', postId)));\n  };\n","import { get } from 'lodash';\nimport parseUrl from 'parse-url';\nimport ensureDetails from './ensureDetails';\nimport formUpdateValue from './formUpdateValue';\nimport switchView from './switchView';\n\nexport default () => {\n  return (dispatch, getState) => {\n    const postUrlField = get(getState(), 'formData.postUrlForm.postUrl', {});\n    if (!postUrlField.value) {\n      return dispatch(formUpdateValue('postUrlForm', 'postUrl', '',\n        `Enter a URL please.`));\n    }\n\n    const pageName = get(getState(), 'config.pageName');\n    const pageId = get(getState(), `pageAuth.${pageName}.id`);\n    const postId = getPostIdByPostUrl(postUrlField.value, pageName, pageId);\n\n    if (postId) {\n      return dispatch(ensureDetails(postId))\n        .then(() => dispatch(switchView('postDetails', postId)));\n    } else {\n      return dispatch(formUpdateValue('postUrlForm', postUrlField.name, postUrlField.value,\n        `Sorry, Graphmilker does not understand this input.`));\n    }\n  };\n};\n\nfunction getPostIdByPostUrl(postUrl, pageName, pageId) {\n  // photo on desktop site\n  // eg: https://www.facebook.com/birthofjoy/photos/a.195350553819898/1356483684373240/?type=3\n  // eg: http://www.facebook.com/dewolfficial/photos/a.421091372204.202391.168546367204/10153657659302205/\n  const photoUrlRegex = /\\/([^/]+)\\/photos\\/a\\.(?:\\d+\\.\\d+\\.)?\\d{12,15}\\/(\\d{15,17})/i;\n  const [ , photoPart1, photoPart2 ] = postUrl.match(photoUrlRegex) || [];\n  if (photoPart1 === pageName && photoPart2) {\n    return `${pageId}_${photoPart2}`;\n  }\n\n  // video in theater mode on desktop site\n  // eg: https://www.facebook.com/dewolfficial/videos/vb.168546367204/10155168529917205/?type=2&theater\n  const videoTheaterRegex = /\\/([^/]+)\\/(?:videos)\\/vb.(\\d{12})\\/(\\d{15,17})?/i;\n  const [ , theaterPart1, theaterPart2, theaterPart3 ] = postUrl.match(videoTheaterRegex) || [];\n  if (theaterPart1 === pageName && theaterPart2 && theaterPart3) {\n    return `${theaterPart2}_${theaterPart3}`;\n  }\n\n  // video or post on desktop site\n  // eg: https://www.facebook.com/dewolfficial/videos/10153768435627205/\n  // eg: https://www.facebook.com/dewolfficial/posts/10153734738707205\n  const desktopUrlRegex = /\\/([^/]+)\\/(?:videos|posts)\\/(\\d{15,17})\\/?/i\n  const [ , postPart1, postPart2 ] = postUrl.match(desktopUrlRegex) || [];\n  if (postPart1 === pageName && postPart2) {\n    return `${pageId}_${postPart2}`;\n  }\n\n  // video on mobile site\n  // eg: https://m.facebook.com/story.php?story_fbid=10153768435627205&id=168546367204\n  const queryParams = parseUrl(postUrl).query;\n  if (queryParams.story_fbid && queryParams.id === pageId) {\n    return `${queryParams.id}_${queryParams.story_fbid}`;\n  }\n\n  return false;\n}\n","import './button.scss';\nimport React from 'react';\n\nexport default ({ children, onClick, type }) => (\n  <button className={`gm-button ${type==='secondary' ? 'gm-button--secondary' : ''}`} onClick={onClick}>\n    {children}\n  </button>\n);\n","import './login.scss';\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { get } from 'lodash';\n\nimport actions from '../actions';\nimport Button from '../components/Button';\n\nconst mapStateToProps = (state, ownProps) => {\n  const pageName = get(state, 'config.pageName');\n  const happy = get(state, 'userAuth.status') === 'unknown';\n  const loginFailed = get(state, 'userAuth.status') === 'rejected';\n  const loggedIn = get(state, 'userAuth.loggedIn');\n  const accessTokenMissing = loggedIn && !get(state, `pageAuth.${pageName}.access_token`);\n  const permissionsMissing = loggedIn && get(state, 'userAuth.permissions.pages_show_list') !== 'granted';\n\n  return {\n    loginFailed,\n    pageName,\n    accessTokenMissing,\n    permissionsMissing,\n    happy,\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onLogin: e => {\n    e.preventDefault();\n    dispatch(actions.login());\n  }\n});\n\nconst Login = ({ onLogin, loginFailed, pageName, accessTokenMissing, permissionsMissing, happy }) => {\n  return (\n    <div className=\"gm-login\">\n      <div className=\"gm-login__main\">\n        <h2 className=\"gm-login__title gm-sectionTitle\">\n          { happy ? \"Let's get started!\" : \"Let's try again!\"}\n        </h2>\n        <p className=\"gm-login__text\">\n          Please login to Facebook &amp; authorise this app.\n        </p>\n        <p className=\"gm-login__text\">\n          <Button onClick={onLogin}>Login &amp; Authorise</Button>\n        </p>\n      </div>\n      {loginFailed && (\n        <div className=\"gm-login__error\">\n          <p className=\"gm-login__errorText\">\n            Login to Facebook failed.\n          </p>\n        </div>\n      )}\n      {accessTokenMissing && (\n        <div className=\"gm-login__error\">\n          <p className=\"gm-login__errorText\">\n            Allow GraphMilker to access the <b>{pageName}</b> Page on your behalf.\n          </p>\n        </div>\n      )}\n      {permissionsMissing && (\n        <div className=\"gm-login__error\">\n          <p className=\"gm-login__errorText\">\n            Select <b>yes</b> when asked permission for Graphmilker to retrieve a list of your pages.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n","import './postSummary.scss';\nimport React from 'react';\n\nexport default ({ postData, selectPost }) => (\n  <button className=\"gm-postSummary\" onClick={selectPost}>\n    <span className=\"gm-postSummary__label gm-label\">{postData.type}</span>\n    <span className=\"gm-postSummary__headline\">{postData.message}</span>\n  </button>\n);\n","import './postlist.scss';\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport actions from '../actions';\nimport Button from '../components/Button';\nimport PostSummary from '../components/PostSummary';\n\nclass PostList extends Component {\n  componentDidMount() {\n    if (!this.props.posts.stubs.length) {\n      this.props.getPosts();\n    }\n  }\n\n  render() {\n    const {\n      posts: { stubs = [], cursors = {} },\n      getPosts,\n      selectPost\n    } = this.props;\n\n    return (\n      <div className=\"gm-postlist\">\n        <h2 className=\"gm-postlist__title gm-sectionTitle\">\n          Select a post from the list:\n        </h2>\n        <ul className=\"gm-postlist__list\">\n          {stubs.map(post => (\n            <li className=\"gm-postlist__item\" key={post.id}>\n              <PostSummary\n                postData={post}\n                selectPost={() => selectPost(post.id)}\n              />\n            </li>\n          ))}\n          {cursors.after && (\n            <li className=\"gm-postlist__item gm-postlist__item--loadMore\">\n              <Button onClick={() => getPosts()} type=\"secondary\">＋ Load more posts</Button>\n            </li>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  posts: state.posts\n});\n\nconst mapDispatchToProps = {\n  getPosts: () => actions.pageApi.getPosts(),\n  selectPost: postId => actions.showDetails(postId)\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostList);\n","import './posturlform.scss';\n\nimport { get } from 'lodash';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport actions from '../actions';\n\nclass PostUrlForm extends Component {\n\n  render() {\n    const { formData, formSubmit, formUpdateValues } = this.props;\n\n    return (\n      <form className='gm-postUrlForm' onSubmit={formSubmit}>\n        <h2 className='gm-postUrlForm__heading gm-visuallyhidden'>\n          Enter the URL of a Facebook post\n        </h2>\n        <div className='gm-postUrlForm__field'>\n          <input\n            className='gm-postUrlForm__input'\n            type='text'\n            name='postUrl'\n            ref='postUrl'\n            placeholder='Paste status update link here'\n            value={get(formData, 'postUrl.value', '')}\n            onChange={formUpdateValues} />\n          <input\n            className='gm-button gm-postUrlForm__submit'\n            type='submit'\n            value='▶ go' />\n        </div>\n        {this.getValidationMessage()}\n      </form>\n    );\n  }\n\n  getValidationMessage() {\n    const { formData } = this.props;\n    const validationMessage = get(formData, 'postUrl.validation');\n    if (!validationMessage) {\n      return undefined;\n    }\n    return (\n      <div className=\"gm-postUrlForm__validationMessage\">{validationMessage}</div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  formData: get(state, 'formData.postUrlForm', {})\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  formSubmit: (event) => {\n    event.preventDefault();\n    return dispatch(actions.urlFormSubmit());\n  },\n  formUpdateValues: (event) => {\n    return dispatch(actions.formUpdateValue('postUrlForm', event.target.name, event.target.value))\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostUrlForm);\n","import './overview.scss';\n\nimport React from 'react';\nimport PostList from '../containers/PostList';\nimport PostUrlForm from '../containers/PostUrlForm';\n\nexport default () => (\n  <div className=\"gm-overview\">\n    <PostUrlForm />\n    <PostList />\n  </div>\n);\n","import './postImage.scss';\nimport React from 'react';\n\nexport default ({ imageUrl }) => (\n  <img className=\"gm-postImage\" src={imageUrl} alt=\"\" />\n);\n","import './postLinkBlock.scss';\nimport React from 'react';\n\nexport default ({ imageUrl, title, description, linkUrl }) => (\n  <a className=\"gm-postLinkBlock\" href={linkUrl} target=\"_blank\" rel=\"noopener noreferrer\" >\n    <img className=\"gm-postLinkBlock__image\" src={imageUrl} alt=\"\" />\n    <div className=\"gm-postLinkBlock__text\">\n      <h3 className=\"gm-postLinkBlock__title\">{title}</h3>\n      <p className=\"gm-postLinkBlock__description\">{description}</p>\n      <p className=\"gm-postLinkBlock__domain\">{toDomain(linkUrl)}</p>\n    </div>\n  </a>\n);\n\nfunction toDomain(url) {\n  const [, domain = ''] = /https?:\\/\\/([^/?]+)/.exec(url) || [];\n  return domain;\n}\n","import './postVideo.scss';\nimport React from 'react';\n\nexport default ({ iframeUrl = '' }) => {\n  return (\n    <div className=\"gm-postVideo\">\n      <iframe\n        title=\"facebook post embedded video\"\n        src={parseYoutubeLinks(iframeUrl)}\n        className=\"gm-postVideo__iframe\"\n        scrolling=\"no\" frameBorder=\"0\" allowFullScreen={true}>\n      </iframe>\n    </div>\n  );\n};\n\n\nfunction parseYoutubeLinks (iframeUrl ) {\n  // ie: https://youtu.be/146EmF6XFwo\n  const [ , youtubeId ] = iframeUrl.match(/youtu\\.be\\/(\\w+)/) || [];\n  if (youtubeId) {\n    return getYoutubeEmbedUrl(youtubeId);\n  }\n\n  // ie: \"https://www.youtube.com/attribution_link?a=wRll5Cd-kp0&u=%2Fwatch%3Fv%3D8I7u1G7J9PU%26feature%3Dshare\"\n  const [ , uParam ] = iframeUrl.match(/youtube\\.com\\/attribution_link(?:.)+[?&]u=(.+)&?/) || [];\n  if (uParam) {\n    const [ , youtubeId ] = decodeURIComponent(uParam).match(/[?&]v=(\\w+)&?/) || [];\n    if (youtubeId) {\n      return getYoutubeEmbedUrl(youtubeId);\n    }\n  }\n\n  // ie: \"https://www.facebook.com/dewolfficial/videos/10155244064642205/\"\n  const [ , facebookVideoId ] = iframeUrl.match(/facebook\\.com\\/.+\\/videos\\/(\\d+)/) || [];\n  if (facebookVideoId) {\n    return `https://www.facebook.com/plugins/video.php?href=${encodeURIComponent(iframeUrl)}&show_text=0&width=560`;\n  }\n\n  return iframeUrl;\n}\n\nfunction getYoutubeEmbedUrl(youtubeId) {\n  return `https://www.youtube.com/embed/${youtubeId}`;\n}\n","import './postdetails.scss';\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { text2html } from 'fb-text2html';\nimport moment from 'moment';\n\nimport actions from '../actions';\nimport Button from '../components/Button';\nimport PostImage from '../components/PostImage';\nimport PostLinkBlock from '../components/PostLinkBlock'\nimport PostVideo from '../components/PostVideo';\n\nconst readableCreatedTime = createdTime => {\n  let now = moment();\n  var then = moment(createdTime);\n  var diff = now.diff(then, 'days');\n\n  if (diff < 1) {\n    return then.fromNow();\n  } else {\n    return then.format('MMMM Do YYYY');\n  }\n};\n\nclass PostDetails extends Component {\n  getVisual() {\n    const { post } = this.props;\n    if (post.type === 'video') {\n      if (post.link) {\n        return (\n          <PostVideo iframeUrl={post.link} />\n        );\n      }\n    } else if(post.type === 'link') {\n      return (\n        <PostLinkBlock\n          imageUrl={post.full_picture}\n          title={post.og_title}\n          description={post.og_description}\n          linkUrl={post.og_url}\n        />\n      )\n    } else if (post.full_picture) {\n      return (\n        <PostImage imageUrl={post.full_picture} />\n      );\n    }\n  }\n\n  render() {\n    const { selectPost, goBack, post } = this.props;\n\n    return (\n      <div className=\"gm-postDetails\">\n        <div className=\"gm-postDetails__header\">\n          <h2 className=\"gm-postDetails__title gm-sectionTitle\">\n            <span className=\"gm-postDetails__label gm-label\">{post.type}</span>\n            <span className=\"gm-postDetails__postDate\">\n              posted {readableCreatedTime(post.created_time)}\n            </span>\n          </h2>\n          <div className=\"gm-postDetails__buttons\">\n            <Button onClick={() => selectPost(post.id)}>\n              ✓ select this post\n            </Button>\n            <Button onClick={goBack} type=\"secondary\">\n              ◀ back\n            </Button>\n          </div>\n        </div>\n        <div\n          className=\"gm-postDetails__body\"\n          dangerouslySetInnerHTML={{\n            __html: text2html(post.message, post.message_tags)\n          }}\n        />\n        <div className=\"gm-postDetails__footer\">\n          (<a href={`https://www.facebook.com/${post.id}`} target=\"_blank\" className=\"gm-postDetails__link\" rel=\"noopener noreferrer\">\n            Open post in Facebook\n          </a>)\n        </div>\n        <div className=\"gm-postDetails__imageFrame\">\n          {this.getVisual()}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  postId: state.view.detailId,\n  post: state.posts.details.find((post) => post.id === state.view.detailId)\n});\n\nconst mapDispatchToProps = {\n  goBack: () => actions.switchView('overview'),\n  selectPost: id => actions.selectPost(id)\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostDetails);\n","import './graphmilker.scss';\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport Error from '../components/Error';\nimport Loading from '../components/Loading';\nimport Login from './Login';\nimport Overview from '../components/Overview';\nimport PostDetails from './PostDetails';\nimport actions from '../actions';\n\nclass GraphMilker extends Component {\n  componentDidMount() {\n    this.props.boot(this.props.config);\n  }\n\n  render() {\n    const { pageName, viewName } = this.props;\n\n    const getView = () => {\n      switch (viewName) {\n        case 'postDetails':\n          return <PostDetails />;\n\n        case 'overview':\n          return <Overview />;\n\n        case 'login':\n          return <Login />;\n\n        case 'loading':\n          return <Loading />;\n\n        default:\n          return <Error type=\"404\" />;\n      }\n    };\n\n    return (\n      <div className=\"gm-graphmilker\">\n        <h1 className=\"gm-graphmilker__title\">\n          GraphMilker {pageName && `for '${pageName}'`}\n        </h1>\n        <div className=\"gm-graphmilker__main\">\n          {getView()}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapState = (state, ownProps) => ({\n  pageName: state.config.pageName,\n  viewName: state.view.name\n});\n\nconst mapActions = {\n  boot: actions.boot\n};\n\nexport default connect(mapState, mapActions)(GraphMilker);\n","import './app.scss';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\n\nimport reducer from './reducers';\nimport Overlay from './components/Overlay';\nimport GraphMilker from './containers/GraphMilker';\nimport actions from './actions';\n\nconst store = createStore(\n  reducer,\n  {},\n  applyMiddleware(thunkMiddleware, createLogger())\n);\n\nexport default (element, config) => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Overlay onClose={() => store.dispatch(actions.closeGraphmilker())}>\n        <GraphMilker config={config} />\n      </Overlay>\n    </Provider>,\n    element\n  );\n};\n","import bootApp from './app';\n\nlet config = {};\n\nfunction getRootElement() {\n  return document.getElementById('graphmilker');\n}\n\nfunction createApp() {\n  const element = document.createElement('div');\n  element.id = 'graphmilker';\n  document.body.appendChild(element);\n\n  bootApp(element, config);\n}\n\nfunction hide() {\n  const element = getRootElement();\n  element.style.display = 'none';\n}\n\nfunction show() {\n  const element = getRootElement();\n  if (element) {\n    element.style.display = 'block';\n  } else {\n    createApp();\n  }\n}\n\nfunction setConfig(configObj) {\n  config = configObj;\n}\n\nwindow.graphmilker = {\n  hide,\n  setConfig,\n  show\n};\n"],"sourceRoot":""}